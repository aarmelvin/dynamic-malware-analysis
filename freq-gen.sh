#!/bin/bash
#Setting Column Names for our Dataset
for i in `cat column-list`; do echo -n -e "$i,"; done | sed 's/.$//' > Dataset-16-10-2019.csv
ARGC=$#
if [ $ARGC -lt 3 ]; then
    echo "Usage: ./freq-gen.sh FirstMalwareNo. LastMalwareNo. FolderSuffix"
    exit 0;
fi

for i in `seq $1 $2`
do
	echo -e "\n" >> Dataset-16-10-2019.csv
	counts=`./syscall-count.sh $i-$3/`
	fname=`grep FileName $i-$3/*.metadata | cut -f2 -d" " | grep -i -v $i-$3.exe | md5sum | cut -f1 -d" "`
	pname=`grep ProcessName $i-$3/*.metadata | cut -f2 -d" " | grep -i -v $i-$3.exe | md5sum | cut -f1 -d" "`
	echo $counts$fname","$pname",Malware" >> Dataset-16-10-2019.csv
done
#To remove all Blank lines
sed -i '/^$/d' Dataset-16-10-2019.csv
